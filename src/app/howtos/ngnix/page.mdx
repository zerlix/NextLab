# Grundlagen NGINX

NGINX ist ein Open-Source-Webserver, der auch als Reverse Proxy Server, Load Balancer, HTTP Cache und Mail Proxy verwendet werden kann. 

Insgesamt wurde NGINX entwickelt, um höchste Leistung, Zuverlässigkeit, geringen Ressourcenverbrauch und Skalierbarkeit zu bieten. Seine Anpassungsfähigkeit und breite Palette von Funktionen machen es zu einer beliebten Wahl für Entwickler und Systemadministratoren, die eine robuste und effiziente Webserver-Lösung suchen.

Hier sind einige Hauptfunktionen und Vorteile von NGINX:

1. Leistung und Skalierbarkeit: NGINX wurde von Grund auf für eine hohe Leistung und Skalierbarkeit entwickelt. Es ist in der Lage, eine große Anzahl von gleichzeitigen Verbindungen zu verarbeiten, ohne dass der Server überlastet wird.

2. Reverse Proxy: NGINX kann als Reverse Proxy verwendet werden, um Anfragen von Clients an verschiedene Backend-Server weiterzuleiten. Dies ermöglicht es, die Last auf mehrere Server zu verteilen und die Ausfallsicherheit zu verbessern.

3. Load Balancing: NGINX bietet eingebaute Load-Balancing-Funktionen, um den Datenverkehr auf mehrere Server zu verteilen. Dadurch können Lastspitzen besser bewältigt und die Verfügbarkeit von Anwendungen verbessert werden.

4. HTTP-Cache: NGINX kann als HTTP-Cache fungieren, um statische Inhalte wie Bilder, CSS-Dateien und JavaScript-Dateien zu speichern. Dies reduziert die Serverlast und verbessert die Ladezeiten für Benutzer.

5. Erweiterbarkeit und Flexibilität: NGINX bietet eine Vielzahl von Erweiterungsmöglichkeiten durch Module, die zusätzliche Funktionen wie SSL-Terminierung, Authentifizierung, Komprimierung und vieles mehr bereitstellen.

6. Geringer Ressourcenverbrauch: NGINX ist bekannt für seinen geringen Speicher- und CPU-Verbrauch im Vergleich zu anderen Webservern wie Apache. Dadurch eignet es sich gut für den Einsatz auf ressourcenbeschränkten Servern oder in Umgebungen mit hohem Datenverkehr.

7. Zuverlässigkeit und Stabilität: NGINX hat sich als äußerst stabil und zuverlässig erwiesen, selbst unter extremen Lastbedingungen. Dies macht es zu einer beliebten Wahl für den Einsatz in produktiven Umgebungen.

Insgesamt ist NGINX aufgrund seiner Leistung, Flexibilität, Zuverlässigkeit und Skalierbarkeit eine beliebte Wahl für Webserver und andere Anwendungsfälle im Bereich der Serverinfrastruktur.

## Installation von NGINX auf Debian:

1. Aktualisieren Sie die Paketliste:
	```bash
	apt update	
	```
2. Installieren Sie NGINX:
	```bash
	apt install ngnix
	```
3. Starten Sie den NGINX-Dienst:
	```bash
	systemctl start nginx
	```
4. Überprüfen Sie den Status von NGINX, um sicherzustellen, dass er läuft:
	```bash
	systemctl status nginx
	```

## Grundlegende Konfiguration von NGINX:

1. Konfigurationsdateien: Die Hauptkonfigurationsdatei von NGINX befindet sich in /etc/nginx/nginx.conf. Zusätzliche Konfigurationen für Websites oder Anwendungen werden normalerweise in separaten Dateien im Verzeichnis /etc/nginx/sites-available/ gespeichert und durch symbolische Links in /etc/nginx/sites-enabled/ aktiviert.

2. Jede Website oder Anwendung wird in einem separaten "Server Block" konfiguriert. Eine einfache Konfiguration könnte wie folgt aussehen:
	```bash
	server {
    listen 80; # Der Port, auf dem NGINX lauscht
    server_name example.com; # Die Domain oder IP-Adresse der Website
    root /var/www/html; # Der Pfad zum Wurzelverzeichnis der Website
    
    location / {
        # Konfiguration für den Umgang mit Anfragen
    }
	}
	```
3. Standardeinstellungen anpassen:
  In der nginx.conf können Sie auch globale Einstellungen für NGINX anpassen, wie z.B. Pfade, Arbeitsprozesse, Protokollierung usw.

4. Neuladen der Konfiguration: 
  Nachdem Sie Änderungen an der Konfiguration vorgenommen haben, müssen Sie NGINX neu laden, damit die Änderungen wirksam werden:
	```bash
	systemctl reload nginx
	```
	Das sind grundlegende Schritte zur Installation und Konfiguration von NGINX auf einem Debian-System. Die tatsächliche Konfiguration hängt jedoch von den spezifischen Anforderungen und Nutzungsszenarien ab.

## Anpassung und Erweiterung

1. NGINX ist äußerst anpassbar und erweiterbar durch die Verwendung von Modulen und Konfigurationen. Diese ermöglichen es Administratoren, NGINX an spezifische    Anforderungen anzupassen und zusätzliche Funktionen hinzuzufügen. Hier sind einige häufig verwendete Module und deren Verwendungszwecke:

2. HTTP-Proxy-Modul (ngx_http_proxy_module): Dieses Modul ermöglicht es NGINX, als HTTP-Proxy-Server zu fungieren, der Anfragen an Backend-Server weiterleitet. Es  wird oft für Load Balancing, Caching und HTTP-Zugriffskontrolle verwendet.

3. HTTP-Rewrite-Modul (ngx_http_rewrite_module): Mit diesem Modul können URLs und Anfragen dynamisch umgeschrieben werden. Es wird verwendet, um Weiterleitungen zu  konfigurieren, URL-Umleitungen durchzuführen und komplexe Anforderungsmanipulationen durchzuführen.

4. SSL-Modul (ngx_http_ssl_module): Das SSL-Modul ermöglicht die Konfiguration von SSL/TLS-Verschlüsselung für sichere HTTPS-Verbindungen. Es ermöglicht die Verwaltung von Zertifikaten, Verschlüsselungsprotokollen und SSL-Konfigurationsoptionen.

5. HTTP-Cache-Modul (ngx_http_proxy_module): Dieses Modul ermöglicht es NGINX, als HTTP-Cache zu fungieren, um statische Inhalte wie Bilder, CSS-Dateien und JavaScript-Dateien zu speichern. Dies verbessert die Leistung und reduziert die Last auf Backend-Servern.

6. HTTP-Gzip-Modul (ngx_http_gzip_module): Das Gzip-Modul ermöglicht die Komprimierung von HTTP-Antworten, um die Übertragungszeit und die Bandbreitennutzung zu reduzieren. Es wird verwendet, um die Website-Leistung zu verbessern und die Ladezeiten für Benutzer zu verkürzen.

7. HTTP-AUTH-Modul (ngx_http_auth_basic_module): Dieses Modul ermöglicht die Einrichtung von HTTP-Authentifizierung, um den Zugriff auf bestimmte Ressourcen durch Benutzername und Passwort zu kontrollieren. Es wird häufig für den Schutz von Administrationsbereichen oder sensiblen Daten verwendet.

8. FastCGI-Modul (ngx_http_fastcgi_module): Dieses Modul ermöglicht die Integration von NGINX mit FastCGI-Anwendungen wie PHP, Python, Ruby usw. Es wird verwendet, um dynamische Inhalte zu verarbeiten und NGINX als Frontend-Server für Webanwendungen zu nutzen. Durch die Verwendung von FastCGI können Anfragen an eine FastCGI-Anwendung weitergeleitet werden, um dynamische Inhalte zu generieren, die dann an den Client zurückgesendet werden. Dies ermöglicht eine bessere Trennung von statischem und dynamischem Inhalt und verbessert die Skalierbarkeit und Leistung der Webanwendung.

Diese sind nur einige Beispiele für die Vielzahl von Modulen, die NGINX bietet. Durch die Kombination verschiedener Module und die Anpassung von Konfigurationseinstellungen können Administratoren NGINX für eine breite Palette von Anwendungsanforderungen konfigurieren, von einfachen statischen Websites bis hin zu komplexen Webanwendungen und APIs.

## Beispiel für eine NGINX-Virtual-Host-Konfiguration mit PHP-Unterstützung:

Angenommen, Sie haben eine Website mit dem Domainnamen "example.com" und Sie möchten PHP für dynamische Inhalte verwenden.

1. Zunächst erstellen oder öffnen Sie eine Konfigurationsdatei für Ihre Website im Verzeichnis /etc/nginx/sites-available/. Sie können eine neue Datei mit einem Namen wie example.com erstellen:

2. Fügen Sie die folgenden Konfigurationsdetails ein:
	```bash
		server {
    	listen 80; # Der Port, auf dem NGINX auf eingehende HTTP-Anfragen lauscht
    	server_name example.com; # Der Domainname Ihrer Website

    	root /var/www/example.com; # Das Stammverzeichnis Ihrer Website, in dem Ihre Dateien gespeichert sind
    	index index.php index.html index.htm; # Die Standarddateien, die NGINX beim Zugriff auf die Website verwendet

    	location / {
    	    try_files $uri $uri/ /index.php?$args; # Versucht, die angeforderte Ressource zu finden, oder leitet sie an den PHP-Interpreter weiter
    	}

    	location ~ \.php$ {
    	    include snippets/fastcgi-php.conf; # Include-Datei mit häufig verwendeten FastCGI-Konfigurationseinstellungen für PHP
    	    fastcgi_pass unix:/var/run/php/php-fpm.sock; # Der Pfad zum FastCGI-Socket, über den NGINX Anfragen an den PHP-FPM-Prozess weiterleitet
    	}

    	location ~ /\.ht {
    	    deny all; # Verweigert den Zugriff auf .htaccess-Dateien, um Sicherheitsrisiken zu minimieren
    	}
  	}
	```
3. Speichern Sie die Datei und schließen Sie den Editor.

4. Erstellen Sie einen symbolischen Link von der Datei in sites-available zu sites-enabled, um die Konfiguration zu aktivieren:
	```bash
	sln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/
	```
5. Überprüfen Sie die Syntax der NGINX-Konfiguration:
	```bash
	nginx -t
	```
6. Wenn die Syntax in Ordnung ist, laden Sie die NGINX-Konfiguration neu, um die Änderungen zu übernehmen:
systemctl reload nginx
 	```bash
	nsystemctl reload nginx
	```
Jetzt sollte Ihre NGINX-Installation so konfiguriert sein, dass sie die Website "example.com" bedient und PHP für dynamische Inhalte unterstützt. Stellen Sie sicher, dass Ihr PHP-FPM-Daemon (FastCGI Process Manager) ordnungsgemäß konfiguriert ist und läuft. Das Socket-Verzeichnis /var/run/php/php-fpm.sock sollte auf Ihre tatsächliche PHP-Version und Konfiguration verweisen.